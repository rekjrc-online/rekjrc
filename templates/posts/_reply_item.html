<!-- _reply_item.html -->
{% for reply in posts %}
<div class="post" onclick="window.location.href='/posts/{{ reply.id }}/';">
    <strong>
        <a href="/profiles/{{ reply.profile_id.pk }}/">{{ reply.profile_id.displayname }}</a>
    </strong>
    - {{ reply.profile_id.get_profiletype_display }}
    - {{ reply.insertdate|date:"m/d/y h:iA" }}
    <p>{{ reply.content|linebreaksbr }}</p>

    {% if reply.image %}
        <a target="_blank" href="{{ reply.image.url }}">
            <img src="{{ reply.image.url }}" alt="Reply image">
        </a>
    {% endif %}

    {% if reply.youtube_id %}
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/{{ reply.youtube_id }}" frameborder="0" allowfullscreen
                   ></iframe>
        </div>
        <p>
            <a href="https://www.youtube.com/watch?v={{ reply.youtube_id }}" target="_blank">Watch on YouTube</a>
        </p>
    {% elif reply.video_url %}
        <p><a href="{{ reply.video_url }}" target="_blank">Watch Video</a></p>
    {% endif %}

    <!-- Post Metrics -->
    <div class="metrics" data-post-id="{{ reply.id }}">
        {% if user.is_authenticated %}
            <a href="#" onclick="event.stopPropagation();" class="like-btn text-decoration-none" data-post-id="{{ reply.id }}">
                {% if reply.liked_by_user %}
                    <span class="heart">â¤ï¸</span>
                {% else %}
                    <span class="heart">ğŸ¤</span>
                {% endif %}
                <span class="like-count">{{ reply.LikeCount }}</span>
            </a> |
            <a href="/posts/{{ reply.id }}/reply" onclick="event.stopPropagation();" class="text-decoration-none">
                ğŸ’¬ {{ reply.CommentCount }}
            </a>
        {% else %}
            <span class="heart">ğŸ¤</span>
            <span class="like-count">{{ reply.LikeCount }}</span>
            | ğŸ’¬ {{ reply.CommentCount }}
        {% endif %}
    </div>
</div>
{% endfor %}
